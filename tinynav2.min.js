/*! tinyNav2.js v1.0
 * https://github.com/viljamis/tinyNav2.js
 * http://tinynav2.viljamis.com
 *
 * Copyright (c) 2013 @viljamis
 * Available under the MIT license
 */
var TinyNav=function(f){var d,j,h=f.document,l=f.getComputedStyle?!0:!1,q=h.getElementsByTagName("head")[0],g=h.createElement("style"),m=!1,n=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](f.event)},a.attachEvent("on"+b,a[b+c]))},p=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&(a.detachEvent("on"+b,a[b+c]),a[b+c]=null,a["e"+b+c]=null)},e=function(a){try{console.log(a)}catch(b){alert(a)}},
k=function(a,b){var c;this.wrapper="string"===typeof a?h.querySelector(a):a;this.wrapper.TinyNav=this;this.options={inner:"#nav ul",transition:300,label:"Menu",debug:!1};for(c in b)this.options[c]=b[c];c=this.options.inner;this.wrapper.inner="string"===typeof c?h.querySelector(c):c;k.prototype._init(this)};k.prototype={destroy:function(){this.wrapper.className=this.wrapper.className.replace(/(^|\s)closed(\s|$)/," ");this.wrapper.removeAttribute("aria-hidden");this.wrapper.TinyNav=null;this.wrapper.inner=
null;this._removeToggle();p(f,"load",j);p(f,"resize",j);g.parentNode.removeChild(g);this.options.debug&&e("TinyNav2 destroyed")},toggle:function(){if(m){var a=parseFloat(this.options.transition)+10,b=this.wrapper;b.className=b.className.replace("opened","closed");setTimeout(function(){b.style.position="absolute"},a);l&&this.wrapper.setAttribute("aria-hidden",!0);m=!1;this.options.debug&&e("Closed navigation")}else this.wrapper.className=this.wrapper.className.replace("closed","opened"),this.wrapper.style.position=
"static",l&&this.wrapper.setAttribute("aria-hidden",!1),m=!0,this.options.debug&&e("Opened navigation");return!1},_init:function(a){a.options.debug&&e("Inited Tinynav2.js");a.wrapper.className+=" closed";this._createStyles(a);this._createToggle(a);this._transitions(a);j=function(){k.prototype._resizer(a)};n(f,"load",j);n(f,"resize",j)},_createStyles:function(a){g.parentNode||(q.appendChild(g),a.options.debug&&e("Created 'styleElement' to <head>"))},_removeStyles:function(a){g.parentNode&&(g.parentNode.removeChild(g),
a.options.debug&&e("Removed 'styleElement' from <head>"))},_createToggle:function(a){var b=h.createElement("a");b.setAttribute("href","#");b.setAttribute("id","tinynav-toggle");b.innerHTML=a.options.label;a.wrapper.parentNode.insertBefore(b,a.wrapper.nextSibling);d=h.querySelector("#tinynav-toggle");this._handleToggleStates(a);a.options.debug&&e("Navigation toggle created")},_removeToggle:function(){d.parentNode.removeChild(d);this.options.debug&&e("Navigation toggle removed")},_handleToggleStates:function(a){d.onmousedown=
function(b){a.preventDefault&&b.preventDefault();a.wrapper.TinyNav.toggle(b);a.options.debug&&e("Detected mousedown")};d.ontouchstart=function(b){d.onmousedown=null;b.preventDefault();a.wrapper.TinyNav.toggle(b)};d.onclick=function(){return!1}},_transitions:function(a){var b=a.wrapper.style;a=parseFloat(a.options.transition);b.WebkitTransition="max-height "+a+"ms";b.MozTransition="max-height "+a+"ms";b.OTransition="max-height "+a+"ms";b.transition="max-height "+a+"ms"},_resizer:function(a){if(l)if("none"!==
f.getComputedStyle(d,null).getPropertyValue("display")){d.setAttribute("aria-hidden",!1);"closed"===a.wrapper.className&&(a.wrapper.setAttribute("aria-hidden",!0),a.wrapper.style.position="absolute");this._createStyles(a);var b=a.wrapper.inner.offsetHeight;g.innerHTML="#nav.opened{max-height:"+b+"px }";a.options.debug&&e("Calculated max-height of "+b+" pixels and updated 'styleElement'")}else d.setAttribute("aria-hidden",!0),a.wrapper.setAttribute("aria-hidden",!1),a.wrapper.style.position="static",
this._removeStyles(a)}};return k}(window,document);
